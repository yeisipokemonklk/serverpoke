{
  "version": 3,
  "sources": ["../../../../../data/mods/gen2/scripts.ts"],
  "sourcesContent": ["/**\r\n * Gen 2 scripts.\r\n */\r\n\r\nexport const Scripts: ModdedBattleScriptsData = {\r\n\tinherit: 'gen3',\r\n\tgen: 2,\r\n\tpokemon: {\r\n\t\tinherit: true,\r\n\t\tgetStat(statName, unboosted, unmodified, fastReturn) {\r\n\t\t\t// @ts-ignore - type checking prevents 'hp' from being passed, but we're paranoid\r\n\t\t\tif (statName === 'hp') throw new Error(\"Please read `maxhp` directly\");\r\n\r\n\t\t\t// base stat\r\n\t\t\tlet stat = this.storedStats[statName];\r\n\r\n\t\t\t// Stat boosts.\r\n\t\t\tif (!unboosted) {\r\n\t\t\t\tlet boost = this.boosts[statName];\r\n\t\t\t\tif (boost > 6) boost = 6;\r\n\t\t\t\tif (boost < -6) boost = -6;\r\n\t\t\t\tif (boost >= 0) {\r\n\t\t\t\t\tconst boostTable = [1, 1.5, 2, 2.5, 3, 3.5, 4];\r\n\t\t\t\t\tstat = Math.floor(stat * boostTable[boost]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst numerators = [100, 66, 50, 40, 33, 28, 25];\r\n\t\t\t\t\tstat = Math.floor(stat * numerators[-boost] / 100);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.status === 'par' && statName === 'spe') {\r\n\t\t\t\tstat = Math.floor(stat / 4);\r\n\t\t\t}\r\n\r\n\t\t\tif (!unmodified) {\r\n\t\t\t\t// Burn attack drop is checked when you get the attack stat upon switch in and used until switch out.\r\n\t\t\t\tif (this.status === 'brn' && statName === 'atk') {\r\n\t\t\t\t\tstat = Math.floor(stat / 2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Gen 2 caps stats at 999 and min is 1.\r\n\t\t\tstat = this.battle.clampIntRange(stat, 1, 999);\r\n\t\t\tif (fastReturn) return stat;\r\n\r\n\t\t\t// Screens\r\n\t\t\tif (!unboosted) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t(statName === 'def' && this.side.sideConditions['reflect']) ||\r\n\t\t\t\t\t(statName === 'spd' && this.side.sideConditions['lightscreen'])\r\n\t\t\t\t) {\r\n\t\t\t\t\tstat *= 2;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Handle boosting items\r\n\t\t\tif (\r\n\t\t\t\t(['Cubone', 'Marowak'].includes(this.baseSpecies.name) && this.item === 'thickclub' && statName === 'atk') ||\r\n\t\t\t\t(this.baseSpecies.name === 'Pikachu' && this.item === 'lightball' && statName === 'spa')\r\n\t\t\t) {\r\n\t\t\t\tstat *= 2;\r\n\t\t\t} else if (this.baseSpecies.name === 'Ditto' && this.item === 'metalpowder' && ['def', 'spd'].includes(statName)) {\r\n\t\t\t\tstat = Math.floor(stat * 1.5);\r\n\t\t\t}\r\n\r\n\t\t\treturn stat;\r\n\t\t},\r\n\t\tboostBy(boost) {\r\n\t\t\tlet delta = 0;\r\n\t\t\tlet i: BoostID;\r\n\t\t\tfor (i in boost) {\r\n\t\t\t\tdelta = boost[i]!;\r\n\t\t\t\tif (delta > 0 && this.getStat(i as StatIDExceptHP, false, true) === 999) {\r\n\t\t\t\t\tdelta = 0;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tthis.boosts[i] += delta;\r\n\t\t\t\tif (this.boosts[i] > 6) {\r\n\t\t\t\t\tdelta -= this.boosts[i] - 6;\r\n\t\t\t\t\tthis.boosts[i] = 6;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.boosts[i] < -6) {\r\n\t\t\t\t\tdelta -= this.boosts[i] - (-6);\r\n\t\t\t\t\tthis.boosts[i] = -6;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn delta;\r\n\t\t},\r\n\t},\r\n\tactions: {\r\n\t\tinherit: true,\r\n\t\trunMove(moveOrMoveName, pokemon, targetLoc, sourceEffect) {\r\n\t\t\tlet move = this.dex.getActiveMove(moveOrMoveName);\r\n\t\t\tlet target = this.battle.getTarget(pokemon, move, targetLoc);\r\n\t\t\tif (!sourceEffect && move.id !== 'struggle') {\r\n\t\t\t\tconst changedMove = this.battle.runEvent('OverrideAction', pokemon, target, move);\r\n\t\t\t\tif (changedMove && changedMove !== true) {\r\n\t\t\t\t\tmove = this.dex.getActiveMove(changedMove);\r\n\t\t\t\t\ttarget = this.battle.getRandomTarget(pokemon, move);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!target && target !== false) target = this.battle.getRandomTarget(pokemon, move);\r\n\r\n\t\t\tthis.battle.setActiveMove(move, pokemon, target);\r\n\r\n\t\t\tif (pokemon.moveThisTurn) {\r\n\t\t\t\t// THIS IS PURELY A SANITY CHECK\r\n\t\t\t\t// DO NOT TAKE ADVANTAGE OF THIS TO PREVENT A POKEMON FROM MOVING;\r\n\t\t\t\t// USE this.battle.queue.cancelMove INSTEAD\r\n\t\t\t\tthis.battle.debug('' + pokemon.fullname + ' INCONSISTENT STATE, ALREADY MOVED: ' + pokemon.moveThisTurn);\r\n\t\t\t\tthis.battle.clearActiveMove(true);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!this.battle.runEvent('BeforeMove', pokemon, target, move)) {\r\n\t\t\t\tthis.battle.runEvent('MoveAborted', pokemon, target, move);\r\n\t\t\t\tthis.battle.clearActiveMove(true);\r\n\t\t\t\t// This is only run for sleep and fully paralysed.\r\n\t\t\t\tthis.battle.runEvent('AfterMoveSelf', pokemon, target, move);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (move.beforeMoveCallback) {\r\n\t\t\t\tif (move.beforeMoveCallback.call(this.battle, pokemon, target, move)) {\r\n\t\t\t\t\tthis.battle.clearActiveMove(true);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tpokemon.lastDamage = 0;\r\n\t\t\tlet lockedMove = this.battle.runEvent('LockMove', pokemon);\r\n\t\t\tif (lockedMove === true) lockedMove = false;\r\n\t\t\tif (!lockedMove) {\r\n\t\t\t\tif (!pokemon.deductPP(move, null, target) && (move.id !== 'struggle')) {\r\n\t\t\t\t\tthis.battle.add('cant', pokemon, 'nopp', move);\r\n\t\t\t\t\tthis.battle.clearActiveMove(true);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tpokemon.moveUsed(move);\r\n\t\t\tthis.battle.actions.useMove(move, pokemon, target, sourceEffect);\r\n\t\t\tthis.battle.singleEvent('AfterMove', move, null, pokemon, target, move);\r\n\t\t\tif (!move.selfSwitch && pokemon.side.foe.active[0].hp) this.battle.runEvent('AfterMoveSelf', pokemon, target, move);\r\n\t\t},\r\n\t\ttryMoveHit(target, pokemon, move) {\r\n\t\t\tconst positiveBoostTable = [1, 1.33, 1.66, 2, 2.33, 2.66, 3];\r\n\t\t\tconst negativeBoostTable = [1, 0.75, 0.6, 0.5, 0.43, 0.36, 0.33];\r\n\t\t\tconst doSelfDestruct = true;\r\n\t\t\tlet damage: number | false | undefined = 0;\r\n\r\n\t\t\tif (move.selfdestruct && doSelfDestruct) {\r\n\t\t\t\tthis.battle.faint(pokemon, pokemon, move);\r\n\t\t\t}\r\n\r\n\t\t\tlet hitResult = this.battle.singleEvent('PrepareHit', move, {}, target, pokemon, move);\r\n\t\t\tif (!hitResult) {\r\n\t\t\t\tif (hitResult === false) this.battle.add('-fail', target);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthis.battle.runEvent('PrepareHit', pokemon, target, move);\r\n\r\n\t\t\tif (!this.battle.singleEvent('Try', move, null, pokemon, target, move)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (move.target === 'all' || move.target === 'foeSide' || move.target === 'allySide' || move.target === 'allyTeam') {\r\n\t\t\t\tif (move.target === 'all') {\r\n\t\t\t\t\thitResult = this.battle.runEvent('TryHitField', target, pokemon, move);\r\n\t\t\t\t} else {\r\n\t\t\t\t\thitResult = this.battle.runEvent('TryHitSide', target, pokemon, move);\r\n\t\t\t\t}\r\n\t\t\t\tif (!hitResult) {\r\n\t\t\t\t\tif (hitResult === false) {\r\n\t\t\t\t\t\tthis.battle.add('-fail', pokemon);\r\n\t\t\t\t\t\tthis.battle.attrLastMove('[still]');\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn this.moveHit(target, pokemon, move);\r\n\t\t\t}\r\n\r\n\t\t\thitResult = this.battle.runEvent('Invulnerability', target, pokemon, move);\r\n\t\t\tif (hitResult === false) {\r\n\t\t\t\tthis.battle.attrLastMove('[miss]');\r\n\t\t\t\tthis.battle.add('-miss', pokemon);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (move.ignoreImmunity === undefined) {\r\n\t\t\t\tmove.ignoreImmunity = (move.category === 'Status');\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\t(!move.ignoreImmunity || (move.ignoreImmunity !== true && !move.ignoreImmunity[move.type])) &&\r\n\t\t\t\t!target.runImmunity(move.type, true)\r\n\t\t\t) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\thitResult = this.battle.singleEvent('TryImmunity', move, {}, target, pokemon, move);\r\n\t\t\tif (hitResult === false) {\r\n\t\t\t\tthis.battle.add('-immune', target);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\thitResult = this.battle.runEvent('TryHit', target, pokemon, move);\r\n\t\t\tif (!hitResult) {\r\n\t\t\t\tif (hitResult === false) this.battle.add('-fail', target);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tlet accuracy = move.accuracy;\r\n\t\t\tif (move.alwaysHit) {\r\n\t\t\t\taccuracy = true;\r\n\t\t\t} else {\r\n\t\t\t\taccuracy = this.battle.runEvent('Accuracy', target, pokemon, move, accuracy);\r\n\t\t\t}\r\n\t\t\t// Now, let's calculate the accuracy.\r\n\t\t\tif (accuracy !== true) {\r\n\t\t\t\taccuracy = Math.floor(accuracy * 255 / 100);\r\n\t\t\t\tif (move.ohko) {\r\n\t\t\t\t\tif (pokemon.level >= target.level) {\r\n\t\t\t\t\t\taccuracy += (pokemon.level - target.level) * 2;\r\n\t\t\t\t\t\taccuracy = Math.min(accuracy, 255);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.battle.add('-immune', target, '[ohko]');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!move.ignoreAccuracy) {\r\n\t\t\t\t\tif (pokemon.boosts.accuracy > 0) {\r\n\t\t\t\t\t\taccuracy *= positiveBoostTable[pokemon.boosts.accuracy];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taccuracy *= negativeBoostTable[-pokemon.boosts.accuracy];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!move.ignoreEvasion) {\r\n\t\t\t\t\tif (target.boosts.evasion > 0 && !move.ignorePositiveEvasion) {\r\n\t\t\t\t\t\taccuracy *= negativeBoostTable[target.boosts.evasion];\r\n\t\t\t\t\t} else if (target.boosts.evasion < 0) {\r\n\t\t\t\t\t\taccuracy *= positiveBoostTable[-target.boosts.evasion];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\taccuracy = Math.min(Math.floor(accuracy), 255);\r\n\t\t\t\taccuracy = Math.max(accuracy, 1);\r\n\t\t\t} else {\r\n\t\t\t\taccuracy = this.battle.runEvent('Accuracy', target, pokemon, move, accuracy);\r\n\t\t\t}\r\n\t\t\taccuracy = this.battle.runEvent('ModifyAccuracy', target, pokemon, move, accuracy);\r\n\t\t\tif (accuracy !== true) accuracy = Math.max(accuracy, 0);\r\n\t\t\tif (move.alwaysHit) {\r\n\t\t\t\taccuracy = true;\r\n\t\t\t} else {\r\n\t\t\t\taccuracy = this.battle.runEvent('Accuracy', target, pokemon, move, accuracy);\r\n\t\t\t}\r\n\t\t\tif (accuracy !== true && accuracy !== 255 && !this.battle.randomChance(accuracy, 256)) {\r\n\t\t\t\tthis.battle.attrLastMove('[miss]');\r\n\t\t\t\tthis.battle.add('-miss', pokemon);\r\n\t\t\t\tdamage = false;\r\n\t\t\t\treturn damage;\r\n\t\t\t}\r\n\t\t\tmove.totalDamage = 0;\r\n\t\t\tpokemon.lastDamage = 0;\r\n\t\t\tif (move.multihit) {\r\n\t\t\t\tlet hits = move.multihit;\r\n\t\t\t\tif (Array.isArray(hits)) {\r\n\t\t\t\t\tif (hits[0] === 2 && hits[1] === 5) {\r\n\t\t\t\t\t\thits = this.battle.sample([2, 2, 2, 3, 3, 3, 4, 5]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\thits = this.battle.random(hits[0], hits[1] + 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\thits = Math.floor(hits);\r\n\t\t\t\tlet nullDamage = true;\r\n\t\t\t\tlet moveDamage: number | undefined | false;\r\n\r\n\t\t\t\tconst isSleepUsable = move.sleepUsable || this.dex.moves.get(move.sourceEffect).sleepUsable;\r\n\t\t\t\tlet i: number;\r\n\t\t\t\tfor (i = 0; i < hits && target.hp && pokemon.hp; i++) {\r\n\t\t\t\t\tif (pokemon.status === 'slp' && !isSleepUsable) break;\r\n\t\t\t\t\tmove.hit = i + 1;\r\n\t\t\t\t\tif (move.hit === hits) move.lastHit = true;\r\n\t\t\t\t\tmoveDamage = this.moveHit(target, pokemon, move);\r\n\t\t\t\t\tif (moveDamage === false) break;\r\n\t\t\t\t\tif (nullDamage && (moveDamage || moveDamage === 0 || moveDamage === undefined)) nullDamage = false;\r\n\t\t\t\t\tdamage = (moveDamage || 0);\r\n\t\t\t\t\tmove.totalDamage += damage;\r\n\t\t\t\t\tthis.battle.eachEvent('Update');\r\n\t\t\t\t}\r\n\t\t\t\tif (i === 0) return 1;\r\n\t\t\t\tif (nullDamage) damage = false;\r\n\t\t\t\tthis.battle.add('-hitcount', target, i);\r\n\t\t\t} else {\r\n\t\t\t\tdamage = this.moveHit(target, pokemon, move);\r\n\t\t\t\tmove.totalDamage = damage;\r\n\t\t\t}\r\n\t\t\tif (move.category !== 'Status') {\r\n\t\t\t\ttarget.gotAttacked(move, damage, pokemon);\r\n\t\t\t}\r\n\t\t\tif (move.ohko) this.battle.add('-ohko');\r\n\r\n\t\t\tif (!move.negateSecondary) {\r\n\t\t\t\tthis.battle.singleEvent('AfterMoveSecondary', move, null, target, pokemon, move);\r\n\t\t\t\tthis.battle.runEvent('AfterMoveSecondary', target, pokemon, move);\r\n\t\t\t}\r\n\r\n\t\t\tif (move.recoil && move.totalDamage) {\r\n\t\t\t\tthis.battle.damage(this.calcRecoilDamage(move.totalDamage, move, pokemon), pokemon, target, 'recoil');\r\n\t\t\t}\r\n\t\t\treturn damage;\r\n\t\t},\r\n\t\tmoveHit(target, pokemon, move, moveData, isSecondary, isSelf) {\r\n\t\t\tlet damage: number | false | null | undefined = undefined;\r\n\t\t\tmove = this.dex.getActiveMove(move);\r\n\r\n\t\t\tif (!moveData) moveData = move;\r\n\t\t\tlet hitResult: boolean | number | null = true;\r\n\r\n\t\t\tif (move.target === 'all' && !isSelf) {\r\n\t\t\t\thitResult = this.battle.singleEvent('TryHitField', moveData, {}, target, pokemon, move);\r\n\t\t\t} else if ((move.target === 'foeSide' || move.target === 'allySide') && !isSelf) {\r\n\t\t\t\thitResult = this.battle.singleEvent('TryHitSide', moveData, {}, (target ? target.side : null), pokemon, move);\r\n\t\t\t} else if (target) {\r\n\t\t\t\thitResult = this.battle.singleEvent('TryHit', moveData, {}, target, pokemon, move);\r\n\t\t\t}\r\n\t\t\tif (!hitResult) {\r\n\t\t\t\tif (hitResult === false) this.battle.add('-fail', target);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (target && !isSecondary && !isSelf) {\r\n\t\t\t\thitResult = this.battle.runEvent('TryPrimaryHit', target, pokemon, moveData);\r\n\t\t\t\tif (hitResult === 0) {\r\n\t\t\t\t\t// special Substitute flag\r\n\t\t\t\t\thitResult = true;\r\n\t\t\t\t\ttarget = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (target && isSecondary && !moveData.self) {\r\n\t\t\t\thitResult = true;\r\n\t\t\t}\r\n\t\t\tif (!hitResult) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (target) {\r\n\t\t\t\tlet didSomething: boolean | number | null = false;\r\n\t\t\t\tdamage = this.getDamage(pokemon, target, moveData);\r\n\r\n\t\t\t\tif ((damage || damage === 0) && !target.fainted) {\r\n\t\t\t\t\tdamage = this.battle.damage(damage, target, pokemon, move);\r\n\t\t\t\t\tif (!(damage || damage === 0)) {\r\n\t\t\t\t\t\tthis.battle.debug('damage interrupted');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdidSomething = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (damage === false || damage === null) {\r\n\t\t\t\t\tif (damage === false && !isSecondary && !isSelf) {\r\n\t\t\t\t\t\tthis.battle.add('-fail', target);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.battle.debug('damage calculation interrupted');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (moveData.boosts && !target.fainted) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tpokemon.volatiles['lockon'] && target === pokemon.volatiles['lockon'].source &&\r\n\t\t\t\t\t\ttarget.isSemiInvulnerable() && !isSelf\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tif (!isSecondary) this.battle.add('-fail', target);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\thitResult = this.battle.boost(moveData.boosts, target, pokemon, move);\r\n\t\t\t\t\tdidSomething = didSomething || hitResult;\r\n\t\t\t\t}\r\n\t\t\t\tif (moveData.heal && !target.fainted) {\r\n\t\t\t\t\tconst d = target.heal(Math.round(target.maxhp * moveData.heal[0] / moveData.heal[1]));\r\n\t\t\t\t\tif (!d && d !== 0) {\r\n\t\t\t\t\t\tthis.battle.add('-fail', target);\r\n\t\t\t\t\t\tthis.battle.debug('heal interrupted');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.battle.add('-heal', target, target.getHealth);\r\n\t\t\t\t\tdidSomething = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (moveData.status) {\r\n\t\t\t\t\thitResult = target.trySetStatus(moveData.status, pokemon, move);\r\n\t\t\t\t\tif (!hitResult && move.status) return hitResult;\r\n\t\t\t\t\tdidSomething = didSomething || hitResult;\r\n\t\t\t\t}\r\n\t\t\t\tif (moveData.forceStatus) {\r\n\t\t\t\t\thitResult = target.setStatus(moveData.forceStatus, pokemon, move);\r\n\t\t\t\t\tdidSomething = didSomething || hitResult;\r\n\t\t\t\t}\r\n\t\t\t\tif (moveData.volatileStatus) {\r\n\t\t\t\t\thitResult = target.addVolatile(moveData.volatileStatus, pokemon, move);\r\n\t\t\t\t\tdidSomething = didSomething || hitResult;\r\n\t\t\t\t}\r\n\t\t\t\tif (moveData.sideCondition) {\r\n\t\t\t\t\thitResult = target.side.addSideCondition(moveData.sideCondition, pokemon, move);\r\n\t\t\t\t\tdidSomething = didSomething || hitResult;\r\n\t\t\t\t}\r\n\t\t\t\tif (moveData.weather) {\r\n\t\t\t\t\thitResult = this.battle.field.setWeather(moveData.weather, pokemon, move);\r\n\t\t\t\t\tdidSomething = didSomething || hitResult;\r\n\t\t\t\t}\r\n\t\t\t\tif (moveData.pseudoWeather) {\r\n\t\t\t\t\thitResult = this.battle.field.addPseudoWeather(moveData.pseudoWeather, pokemon, move);\r\n\t\t\t\t\tdidSomething = didSomething || hitResult;\r\n\t\t\t\t}\r\n\t\t\t\tif (moveData.forceSwitch) {\r\n\t\t\t\t\tif (this.battle.canSwitch(target.side)) didSomething = true; // at least defer the fail message to later\r\n\t\t\t\t}\r\n\t\t\t\tif (moveData.selfSwitch) {\r\n\t\t\t\t\tif (this.battle.canSwitch(pokemon.side)) didSomething = true; // at least defer the fail message to later\r\n\t\t\t\t}\r\n\t\t\t\t// Hit events\r\n\t\t\t\t//   These are like the TryHit events, except we don't need a FieldHit event.\r\n\t\t\t\t//   Scroll up for the TryHit event documentation, and just ignore the \"Try\" part. ;)\r\n\t\t\t\thitResult = null;\r\n\t\t\t\tif (move.target === 'all' && !isSelf) {\r\n\t\t\t\t\tif (moveData.onHitField) hitResult = this.battle.singleEvent('HitField', moveData, {}, target, pokemon, move);\r\n\t\t\t\t} else if ((move.target === 'foeSide' || move.target === 'allySide') && !isSelf) {\r\n\t\t\t\t\tif (moveData.onHitSide) hitResult = this.battle.singleEvent('HitSide', moveData, {}, target.side, pokemon, move);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (moveData.onHit) hitResult = this.battle.singleEvent('Hit', moveData, {}, target, pokemon, move);\r\n\t\t\t\t\tif (!isSelf && !isSecondary) {\r\n\t\t\t\t\t\tthis.battle.runEvent('Hit', target, pokemon, move);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (moveData.onAfterHit) hitResult = this.battle.singleEvent('AfterHit', moveData, {}, target, pokemon, move);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!hitResult && !didSomething && !moveData.self && !moveData.selfdestruct) {\r\n\t\t\t\t\tif (!isSelf && !isSecondary) {\r\n\t\t\t\t\t\tif (hitResult === false || didSomething === false) this.battle.add('-fail', target);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.battle.debug('move failed because it did nothing');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (moveData.self) {\r\n\t\t\t\t// This is done solely to mimic in-game RNG behaviour. All self drops have a 100% chance of happening but still grab a random number.\r\n\t\t\t\tif (!isSecondary && moveData.self.boosts) this.battle.random(100);\r\n\t\t\t\tthis.moveHit(pokemon, pokemon, move, moveData.self, isSecondary, true);\r\n\t\t\t}\r\n\t\t\t// Secondary effects don't happen if the target faints from the attack\r\n\t\t\tif (target?.hp && moveData.secondaries && this.battle.runEvent('TrySecondaryHit', target, pokemon, moveData)) {\r\n\t\t\t\tfor (const secondary of moveData.secondaries) {\r\n\t\t\t\t\t// We check here whether to negate the probable secondary status if it's burn or freeze.\r\n\t\t\t\t\t// In the game, this is checked and if true, the random number generator is not called.\r\n\t\t\t\t\t// That means that a move that does not share the type of the target can status it.\r\n\t\t\t\t\t// This means tri-attack can burn fire-types and freeze ice-types.\r\n\t\t\t\t\t// Unlike gen 1, though, paralysis works for all unless the target is immune to direct move (ie. ground-types and t-wave).\r\n\t\t\t\t\tif (secondary.status && ['brn', 'frz'].includes(secondary.status) && target.hasType(move.type)) {\r\n\t\t\t\t\t\tthis.battle.debug('Target immune to [' + secondary.status + ']');\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// A sleeping or frozen target cannot be flinched in Gen 2; King's Rock is exempt\r\n\t\t\t\t\tif (secondary.volatileStatus === 'flinch' && ['slp', 'frz'].includes(target.status) && !secondary.kingsrock) {\r\n\t\t\t\t\t\tthis.battle.debug('Cannot flinch a sleeping or frozen target');\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Multi-hit moves only roll for status once\r\n\t\t\t\t\tif (!move.multihit || move.lastHit) {\r\n\t\t\t\t\t\tconst effectChance = Math.floor((secondary.chance || 100) * 255 / 100);\r\n\t\t\t\t\t\tif (typeof secondary.chance === 'undefined' || this.battle.randomChance(effectChance, 256)) {\r\n\t\t\t\t\t\t\tthis.moveHit(target, pokemon, move, secondary, true, isSelf);\r\n\t\t\t\t\t\t} else if (effectChance === 255) {\r\n\t\t\t\t\t\t\tthis.battle.hint(\"In Gen 2, moves with a 100% secondary effect chance will not trigger in 1/256 uses.\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (target && target.hp > 0 && pokemon.hp > 0 && moveData.forceSwitch && this.battle.canSwitch(target.side)) {\r\n\t\t\t\thitResult = this.battle.runEvent('DragOut', target, pokemon, move);\r\n\t\t\t\tif (hitResult) {\r\n\t\t\t\t\tthis.dragIn(target.side, target.position);\r\n\t\t\t\t} else if (hitResult === false) {\r\n\t\t\t\t\tthis.battle.add('-fail', target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (move.selfSwitch && pokemon.hp) {\r\n\t\t\t\tpokemon.switchFlag = move.id;\r\n\t\t\t}\r\n\t\t\treturn damage;\r\n\t\t},\r\n\t\tgetDamage(source, target, move, suppressMessages) {\r\n\t\t\t// First of all, we get the move.\r\n\t\t\tif (typeof move === 'string') {\r\n\t\t\t\tmove = this.dex.getActiveMove(move);\r\n\t\t\t} else if (typeof move === 'number') {\r\n\t\t\t\tmove = {\r\n\t\t\t\t\tbasePower: move,\r\n\t\t\t\t\ttype: '???',\r\n\t\t\t\t\tcategory: 'Physical',\r\n\t\t\t\t\twillCrit: false,\r\n\t\t\t\t\tflags: {},\r\n\t\t\t\t} as unknown as ActiveMove;\r\n\t\t\t}\r\n\r\n\t\t\t// Let's test for immunities.\r\n\t\t\tif (!move.ignoreImmunity || (move.ignoreImmunity !== true && !move.ignoreImmunity[move.type])) {\r\n\t\t\t\tif (!target.runImmunity(move.type, true)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Is it an OHKO move?\r\n\t\t\tif (move.ohko) {\r\n\t\t\t\treturn target.maxhp;\r\n\t\t\t}\r\n\r\n\t\t\t// We edit the damage through move's damage callback\r\n\t\t\tif (move.damageCallback) {\r\n\t\t\t\treturn move.damageCallback.call(this.battle, source, target);\r\n\t\t\t}\r\n\r\n\t\t\t// We take damage from damage=level moves\r\n\t\t\tif (move.damage === 'level') {\r\n\t\t\t\treturn source.level;\r\n\t\t\t}\r\n\r\n\t\t\t// If there's a fix move damage, we run it\r\n\t\t\tif (move.damage) {\r\n\t\t\t\treturn move.damage;\r\n\t\t\t}\r\n\r\n\t\t\t// We check the category and typing to calculate later on the damage\r\n\t\t\tmove.category = this.battle.getCategory(move);\r\n\t\t\t// '???' is typeless damage: used for Struggle and Confusion etc\r\n\t\t\tif (!move.type) move.type = '???';\r\n\t\t\tconst type = move.type;\r\n\r\n\t\t\t// We get the base power and apply basePowerCallback if necessary\r\n\t\t\tlet basePower: number | false | null | undefined = move.basePower;\r\n\t\t\tif (move.basePowerCallback) {\r\n\t\t\t\tbasePower = move.basePowerCallback.call(this.battle, source, target, move);\r\n\t\t\t}\r\n\r\n\t\t\t// We check for Base Power\r\n\t\t\tif (!basePower) {\r\n\t\t\t\tif (basePower === 0) return; // Returning undefined means not dealing damage\r\n\t\t\t\treturn basePower;\r\n\t\t\t}\r\n\t\t\tbasePower = this.battle.clampIntRange(basePower, 1);\r\n\r\n\t\t\t// Checking for the move's Critical Hit ratio\r\n\t\t\tlet critRatio = this.battle.runEvent('ModifyCritRatio', source, target, move, move.critRatio || 0);\r\n\t\t\tcritRatio = this.battle.clampIntRange(critRatio, 0, 5);\r\n\t\t\tconst critMult = [0, 17, 32, 64, 85, 128];\r\n\t\t\tlet isCrit = move.willCrit || false;\r\n\t\t\tif (typeof move.willCrit === 'undefined') {\r\n\t\t\t\tif (critRatio) {\r\n\t\t\t\t\tisCrit = this.battle.random(256) < critMult[critRatio];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (isCrit && this.battle.runEvent('CriticalHit', target, null, move)) {\r\n\t\t\t\ttarget.getMoveHitData(move).crit = true;\r\n\t\t\t}\r\n\r\n\t\t\t// Happens after crit calculation\r\n\t\t\tif (basePower) {\r\n\t\t\t\t// confusion damage\r\n\t\t\t\tif (move.isConfusionSelfHit) {\r\n\t\t\t\t\tmove.type = move.baseMoveType!;\r\n\t\t\t\t\tbasePower = this.battle.runEvent('BasePower', source, target, move, basePower, true);\r\n\t\t\t\t\tmove.type = '???';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbasePower = this.battle.runEvent('BasePower', source, target, move, basePower, true);\r\n\t\t\t\t}\r\n\t\t\t\tif (basePower && move.basePowerModifier) {\r\n\t\t\t\t\tbasePower *= move.basePowerModifier;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!basePower) return 0;\r\n\t\t\tbasePower = this.battle.clampIntRange(basePower, 1);\r\n\r\n\t\t\t// We now check for attacker and defender\r\n\t\t\tlet level = source.level;\r\n\r\n\t\t\t// Using Beat Up\r\n\t\t\tif (move.allies) {\r\n\t\t\t\tthis.battle.add('-activate', source, 'move: Beat Up', '[of] ' + move.allies[0].name);\r\n\t\t\t\tlevel = move.allies[0].level;\r\n\t\t\t}\r\n\r\n\t\t\tconst attacker = move.overrideOffensivePokemon === 'target' ? target : source;\r\n\t\t\tconst defender = move.overrideDefensivePokemon === 'source' ? source : target;\r\n\r\n\t\t\tconst isPhysical = move.category === 'Physical';\r\n\t\t\tconst atkType: StatIDExceptHP = move.overrideOffensiveStat || (isPhysical ? 'atk' : 'spa');\r\n\t\t\tconst defType: StatIDExceptHP = move.overrideDefensiveStat || (isPhysical ? 'def' : 'spd');\r\n\r\n\t\t\tlet unboosted = false;\r\n\t\t\tlet noburndrop = false;\r\n\r\n\t\t\tif (isCrit) {\r\n\t\t\t\tif (!suppressMessages) this.battle.add('-crit', target);\r\n\t\t\t\t// Stat level modifications are ignored if they are neutral to or favour the defender.\r\n\t\t\t\t// Reflect and Light Screen defensive boosts are only ignored if stat level modifications were also ignored as a result of that.\r\n\t\t\t\tif (attacker.boosts[atkType] <= defender.boosts[defType]) {\r\n\t\t\t\t\tunboosted = true;\r\n\t\t\t\t\tnoburndrop = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet attack = attacker.getStat(atkType, unboosted, noburndrop);\r\n\t\t\tlet defense = defender.getStat(defType, unboosted);\r\n\r\n\t\t\t// Using Beat Up\r\n\t\t\tif (move.allies) {\r\n\t\t\t\tattack = move.allies[0].species.baseStats.atk;\r\n\t\t\t\tmove.allies.shift();\r\n\t\t\t\tdefense = defender.species.baseStats.def;\r\n\t\t\t}\r\n\r\n\t\t\t// Moves that ignore offense and defense respectively.\r\n\t\t\tif (move.ignoreOffensive) {\r\n\t\t\t\tthis.battle.debug('Negating (sp)atk boost/penalty.');\r\n\t\t\t\t// The attack drop from the burn is only applied when attacker's attack level is higher than defender's defense level.\r\n\t\t\t\tattack = attacker.getStat(atkType, true, true);\r\n\t\t\t}\r\n\r\n\t\t\tif (move.ignoreDefensive) {\r\n\t\t\t\tthis.battle.debug('Negating (sp)def boost/penalty.');\r\n\t\t\t\tdefense = target.getStat(defType, true, true);\r\n\t\t\t}\r\n\r\n\t\t\tif (move.id === 'present') {\r\n\t\t\t\tconst typeIndexes: {[k: string]: number} = {\r\n\t\t\t\t\tNormal: 0, Fighting: 1, Flying: 2, Poison: 3, Ground: 4, Rock: 5, Bug: 7, Ghost: 8, Steel: 9,\r\n\t\t\t\t\tFire: 20, Water: 21, Grass: 22, Electric: 23, Psychic: 24, Ice: 25, Dragon: 26, Dark: 27,\r\n\t\t\t\t};\r\n\t\t\t\tattack = 10;\r\n\r\n\t\t\t\tconst attackerLastType = attacker.getTypes().slice(-1)[0];\r\n\t\t\t\tconst defenderLastType = defender.getTypes().slice(-1)[0];\r\n\r\n\t\t\t\tdefense = typeIndexes[attackerLastType] || 1;\r\n\t\t\t\tlevel = typeIndexes[defenderLastType] || 1;\r\n\t\t\t\tthis.battle.hint(\"Gen 2 Present has a glitched damage calculation using the secondary types of the Pokemon for the Attacker's Level and Defender's Defense.\", true);\r\n\t\t\t}\r\n\r\n\t\t\t// When either attack or defense are higher than 256, they are both divided by 4 and modded by 256.\r\n\t\t\t// This is what causes the rollover bugs.\r\n\t\t\tif (attack >= 256 || defense >= 256) {\r\n\t\t\t\tif (attack >= 1024 || defense >= 1024) {\r\n\t\t\t\t\tthis.battle.hint(\"In Gen 2, a stat will roll over to a small number if it is larger than 1024.\");\r\n\t\t\t\t}\r\n\t\t\t\tattack = this.battle.clampIntRange(Math.floor(attack / 4) % 256, 1);\r\n\t\t\t\tdefense = this.battle.clampIntRange(Math.floor(defense / 4) % 256, 1);\r\n\t\t\t}\r\n\r\n\t\t\t// Self destruct moves halve defense at this point.\r\n\t\t\tif (move.selfdestruct && defType === 'def') {\r\n\t\t\t\tdefense = this.battle.clampIntRange(Math.floor(defense / 2), 1);\r\n\t\t\t}\r\n\r\n\t\t\t// Let's go with the calculation now that we have what we need.\r\n\t\t\t// We do it step by step just like the game does.\r\n\t\t\tlet damage = level * 2;\r\n\t\t\tdamage = Math.floor(damage / 5);\r\n\t\t\tdamage += 2;\r\n\t\t\tdamage *= basePower;\r\n\t\t\tdamage *= attack;\r\n\t\t\tdamage = Math.floor(damage / defense);\r\n\t\t\tdamage = Math.floor(damage / 50);\r\n\t\t\tif (isCrit) damage *= 2;\r\n\t\t\tdamage = Math.floor(this.battle.runEvent('ModifyDamage', attacker, defender, move, damage));\r\n\t\t\tdamage = this.battle.clampIntRange(damage, 1, 997);\r\n\t\t\tdamage += 2;\r\n\r\n\t\t\t// Weather modifiers\r\n\t\t\tif (\r\n\t\t\t\t(type === 'Water' && this.battle.field.isWeather('raindance')) ||\r\n\t\t\t\t(type === 'Fire' && this.battle.field.isWeather('sunnyday'))\r\n\t\t\t) {\r\n\t\t\t\tdamage = Math.floor(damage * 1.5);\r\n\t\t\t} else if (\r\n\t\t\t\t((type === 'Fire' || move.id === 'solarbeam') && this.battle.field.isWeather('raindance')) ||\r\n\t\t\t\t(type === 'Water' && this.battle.field.isWeather('sunnyday'))\r\n\t\t\t) {\r\n\t\t\t\tdamage = Math.floor(damage / 2);\r\n\t\t\t}\r\n\r\n\t\t\t// STAB damage bonus, the \"???\" type never gets STAB\r\n\t\t\tif (type !== '???' && source.hasType(type)) {\r\n\t\t\t\tdamage += Math.floor(damage / 2);\r\n\t\t\t}\r\n\r\n\t\t\t// Type effectiveness\r\n\t\t\tconst totalTypeMod = target.runEffectiveness(move);\r\n\t\t\t// Super effective attack\r\n\t\t\tif (totalTypeMod > 0) {\r\n\t\t\t\tif (!suppressMessages) this.battle.add('-supereffective', target);\r\n\t\t\t\tdamage *= 2;\r\n\t\t\t\tif (totalTypeMod >= 2) {\r\n\t\t\t\t\tdamage *= 2;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Resisted attack\r\n\t\t\tif (totalTypeMod < 0) {\r\n\t\t\t\tif (!suppressMessages) this.battle.add('-resisted', target);\r\n\t\t\t\tdamage = Math.floor(damage / 2);\r\n\t\t\t\tif (totalTypeMod <= -2) {\r\n\t\t\t\t\tdamage = Math.floor(damage / 2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Apply random factor if damage is greater than 1, except for Flail and Reversal\r\n\t\t\tif (!move.noDamageVariance && damage > 1) {\r\n\t\t\t\tdamage *= this.battle.random(217, 256);\r\n\t\t\t\tdamage = Math.floor(damage / 255);\r\n\t\t\t}\r\n\r\n\t\t\t// If damage is less than 1, we return 1\r\n\t\t\tif (basePower && !Math.floor(damage)) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\r\n\t\t\t// We are done, this is the final damage\r\n\t\t\treturn damage;\r\n\t\t},\r\n\t},\r\n};\r\n"],
  "mappings": "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",
  "names": []
}
