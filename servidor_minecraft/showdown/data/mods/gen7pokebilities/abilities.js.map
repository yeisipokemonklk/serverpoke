{
  "version": 3,
  "sources": ["../../../../../data/mods/gen7pokebilities/abilities.ts"],
  "sourcesContent": ["export const Abilities: {[k: string]: ModdedAbilityData} = {\r\n\tmummy: {\r\n\t\tinherit: true,\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif (target.ability === 'mummy') {\r\n\t\t\t\tconst sourceAbility = source.getAbility();\r\n\t\t\t\tif (sourceAbility.flags['cantsuppress'] || sourceAbility.id === 'mummy') {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.checkMoveMakesContact(move, source, target, !source.isAlly(target))) {\r\n\t\t\t\t\tconst oldAbility = source.setAbility('mummy', target);\r\n\t\t\t\t\tif (oldAbility) {\r\n\t\t\t\t\t\tthis.add('-activate', target, 'ability: Mummy', this.dex.abilities.get(oldAbility).name, '[of] ' + source);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconst possibleAbilities = [source.ability, ...(source.m.innates || [])]\r\n\t\t\t\t\t.filter(val => !this.dex.abilities.get(val).flags['cantsuppress'] && val !== 'mummy');\r\n\t\t\t\tif (!possibleAbilities.length) return;\r\n\t\t\t\tif (this.checkMoveMakesContact(move, source, target, !source.isAlly(target))) {\r\n\t\t\t\t\tconst abil = this.sample(possibleAbilities);\r\n\t\t\t\t\tif (abil === source.ability) {\r\n\t\t\t\t\t\tconst oldAbility = source.setAbility('mummy', target);\r\n\t\t\t\t\t\tif (oldAbility) {\r\n\t\t\t\t\t\t\tthis.add('-activate', target, 'ability: Mummy', this.dex.abilities.get(oldAbility).name, '[of] ' + source);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsource.removeVolatile('ability:' + abil);\r\n\t\t\t\t\t\tsource.addVolatile('ability:mummy', source);\r\n\t\t\t\t\t\tif (abil) {\r\n\t\t\t\t\t\t\tthis.add('-activate', target, 'ability: Mummy', this.dex.abilities.get(abil).name, '[of] ' + source);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tpowerofalchemy: {\r\n\t\tinherit: true,\r\n\t\tonAllyFaint(ally) {\r\n\t\t\tconst pokemon = this.effectState.target;\r\n\t\t\tif (!pokemon.hp) return;\r\n\t\t\tconst isAbility = pokemon.ability === 'powerofalchemy';\r\n\t\t\tlet possibleAbilities = [ally.ability];\r\n\t\t\tif (ally.m.innates) possibleAbilities.push(...ally.m.innates);\r\n\t\t\tconst additionalBannedAbilities = [pokemon.ability, ...(pokemon.m.innates || [])];\r\n\t\t\tpossibleAbilities = possibleAbilities\r\n\t\t\t\t.filter(val => !this.dex.abilities.get(val).flags['noreceiver'] && !additionalBannedAbilities.includes(val));\r\n\t\t\tif (!possibleAbilities.length) return;\r\n\t\t\tconst ability = this.dex.abilities.get(possibleAbilities[this.random(possibleAbilities.length)]);\r\n\t\t\tthis.add('-ability', pokemon, ability, '[from] ability: Power of Alchemy', '[of] ' + ally);\r\n\t\t\tif (isAbility) {\r\n\t\t\t\tpokemon.setAbility(ability);\r\n\t\t\t} else {\r\n\t\t\t\tpokemon.removeVolatile(\"ability:powerofalchemy\");\r\n\t\t\t\tpokemon.addVolatile(\"ability:\" + ability, pokemon);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\treceiver: {\r\n\t\tinherit: true,\r\n\t\tonAllyFaint(ally) {\r\n\t\t\tconst pokemon = this.effectState.target;\r\n\t\t\tif (!pokemon.hp) return;\r\n\t\t\tconst isAbility = pokemon.ability === 'receiver';\r\n\t\t\tlet possibleAbilities = [ally.ability];\r\n\t\t\tif (ally.m.innates) possibleAbilities.push(...ally.m.innates);\r\n\t\t\tconst additionalBannedAbilities = [pokemon.ability, ...(pokemon.m.innates || [])];\r\n\t\t\tpossibleAbilities = possibleAbilities\r\n\t\t\t\t.filter(val => !this.dex.abilities.get(val).flags['noreceiver'] && !additionalBannedAbilities.includes(val));\r\n\t\t\tif (!possibleAbilities.length) return;\r\n\t\t\tconst ability = this.dex.abilities.get(possibleAbilities[this.random(possibleAbilities.length)]);\r\n\t\t\tthis.add('-ability', pokemon, ability, '[from] ability: Receiver', '[of] ' + ally);\r\n\t\t\tif (isAbility) {\r\n\t\t\t\tpokemon.setAbility(ability);\r\n\t\t\t} else {\r\n\t\t\t\tpokemon.removeVolatile(\"ability:receiver\");\r\n\t\t\t\tpokemon.addVolatile(\"ability:\" + ability, pokemon);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\ttrace: {\r\n\t\tinherit: true,\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (!pokemon.isStarted) return;\r\n\t\t\tconst isAbility = pokemon.ability === 'trace';\r\n\t\t\tconst possibleTargets: Pokemon[] = [];\r\n\t\t\tfor (const target of pokemon.side.foe.active) {\r\n\t\t\t\tif (target && !target.fainted) {\r\n\t\t\t\t\tpossibleTargets.push(target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twhile (possibleTargets.length) {\r\n\t\t\t\tconst rand = this.random(possibleTargets.length);\r\n\t\t\t\tconst target = possibleTargets[rand];\r\n\t\t\t\tlet possibleAbilities = [target.ability];\r\n\t\t\t\tif (target.m.innates) possibleAbilities.push(...target.m.innates);\r\n\t\t\t\tconst additionalBannedAbilities = [pokemon.ability, ...(pokemon.m.innates || [])];\r\n\t\t\t\tpossibleAbilities = possibleAbilities\r\n\t\t\t\t\t.filter(val => !this.dex.abilities.get(val).flags['notrace'] && !additionalBannedAbilities.includes(val));\r\n\t\t\t\tif (!possibleAbilities.length) {\r\n\t\t\t\t\tpossibleTargets.splice(rand, 1);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tconst ability = this.dex.abilities.get(this.sample(possibleAbilities));\r\n\t\t\t\tthis.add('-ability', pokemon, ability, '[from] ability: Trace', '[of] ' + target);\r\n\t\t\t\tif (isAbility) {\r\n\t\t\t\t\tpokemon.setAbility(ability);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpokemon.removeVolatile(\"ability:trace\");\r\n\t\t\t\t\tpokemon.addVolatile(\"ability:\" + ability, pokemon);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n"],
  "mappings": "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",
  "names": []
}
